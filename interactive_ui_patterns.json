[
  {
    "title": "-",
    "description": "-",
    "code": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>CodeGrid: Draggable Menu</title>\n    <!-- GSAP & Draggable CDNs -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Draggable.min.js\"></script>\n    \n    <!-- Importing a font closest to Google Sans for the public web (Inter/Roboto) -->\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap\" rel=\"stylesheet\">\n\n    <style>\n        :root {\n            --base-100: #fafafa;\n            --base-200: #e8e6e7;\n            --base-300: #d3d2d2;\n            --base-400: #0f0f0f;\n        }\n\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            /* Fallback font stack as specific Google Sans requires proprietary link */\n            font-family: 'Inter', 'Google Sans', sans-serif;\n            background-color: var(--base-100);\n            width: 100vw;\n            height: 100vh;\n            overflow: hidden;\n        }\n\n        /* --- DROP ZONE --- */\n        .menu-drop-zone {\n            position: fixed;\n            top: 2rem;\n            left: 2rem;\n            height: calc(3.5rem + 0.7rem); /* 3.5 toggler/drawer height + padding approx */\n            border: 0.075rem dashed rgba(0, 0, 0, 0.25);\n            border-radius: 4rem;\n            transition: opacity 0.2s ease-out;\n            pointer-events: none;\n            opacity: 0;\n            z-index: 998;\n        }\n\n        /* --- MENU DRAWER --- */\n        .menu-drawer {\n            position: fixed;\n            top: 2rem;\n            left: 2rem;\n            padding: 0.35rem;\n            background-color: var(--base-200);\n            border-radius: 4rem;\n            display: flex;\n            align-items: center;\n            /* Necessary for Draggable bounds calculations */\n            transform-origin: center center;\n            z-index: 999;\n        }\n\n        /* --- LOGO SECTION --- */\n        .menu-logo {\n            width: 6rem;\n            height: 3.5rem;\n            border-radius: 4rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            flex-shrink: 0;\n        }\n\n        .menu-logo img {\n            width: 3.5rem;\n            /* Invert placeholder if necessary to match style */\n            filter: grayscale(1); \n        }\n\n        /* --- MENU ITEMS --- */\n        .menu-items {\n            display: flex;\n            gap: 0.35rem;\n            /* Initially handled by GSAP */\n            opacity: 0; \n        }\n\n        .menu-items .menu-item {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            width: max-content;\n            height: 3.5rem;\n            background-color: var(--base-100);\n            border-radius: 4rem;\n            padding: 0 1.5rem;\n            flex-shrink: 0;\n            user-select: none;\n        }\n\n        .menu-items .menu-item a {\n            text-decoration: none;\n            color: var(--base-400);\n            font-weight: 450;\n            letter-spacing: -0.01rem;\n        }\n\n        /* --- TOGGLER --- */\n        .menu-toggler {\n            position: relative;\n            width: 3.5rem;\n            height: 3.5rem;\n            padding: 1.125rem;\n            background-color: var(--base-300);\n            border-radius: 4rem;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            gap: 0.2rem;\n            flex-shrink: 0;\n            cursor: pointer;\n        }\n\n        /* Draggable active states */\n        .menu-drawer:active .menu-toggler {\n            cursor: grabbing;\n        }\n\n        /* Hamburger Lines */\n        .menu-toggler span {\n            position: relative;\n            width: 100%;\n            height: 0.125rem;\n            background-color: var(--base-400);\n            transition: transform 0.3s ease;\n            transform-origin: center;\n            will-change: transform;\n        }\n\n        /* Hamburger to X Animation Logic handled by class */\n        .menu-toggler.close span:nth-child(1) {\n            transform: rotate(45deg) translateX(0.125rem) translateY(0.1rem) scaleX(0.9);\n        }\n\n        .menu-toggler.close span:nth-child(2) {\n            transform: rotate(-45deg) translateX(0.125rem) translateY(-0.1rem) scaleX(0.9);\n        }\n\n        /* Visual placeholder text for context */\n        .context-bg {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            font-size: 5vw;\n            color: #ccc;\n            font-weight: 700;\n            z-index: 0;\n            opacity: 0.2;\n            text-align: center;\n        }\n    </style>\n</head>\n<body>\n\n    <!-- Placeholder Context Text -->\n    <div class=\"context-bg\">Designing an<br>AI-Native Product</div>\n\n    <!-- Drop Zone Shadow -->\n    <div class=\"menu-drop-zone\"></div>\n\n    <!-- Draggable Component -->\n    <div class=\"menu-drawer\">\n        <div class=\"menu-logo\">\n            <!-- Using text 'O/M' SVG similar to video reference for accurate recreation -->\n            <svg width=\"40\" height=\"40\" viewBox=\"0 0 100 40\" xmlns=\"http://www.w3.org/2000/svg\">\n               <text x=\"0\" y=\"30\" font-family=\"Arial\" font-weight=\"900\" font-size=\"30\">O/M</text>\n            </svg>\n        </div>\n\n        <div class=\"menu-items\">\n            <div class=\"menu-item\"><a href=\"#\">Work</a></div>\n            <div class=\"menu-item\"><a href=\"#\">Manifesto</a></div>\n            <div class=\"menu-item\"><a href=\"#\">Contact</a></div>\n        </div>\n\n        <div class=\"menu-toggler\">\n            <span></span>\n            <span></span>\n        </div>\n    </div>\n\n    <script>\n        // Note: Using standard GSAP globals window.gsap since we aren't using a bundler.\n        // If using bundler: import gsap from \"gsap\"; import Draggable from \"gsap/Draggable\";\n        \n        // Register Plugin\n        gsap.registerPlugin(Draggable);\n\n        // Get References\n        const menuDropZone = document.querySelector(\".menu-drop-zone\");\n        const menuDrawer = document.querySelector(\".menu-drawer\");\n        const menuLogo = document.querySelector(\".menu-logo\");\n        const menuItems = document.querySelector(\".menu-items\");\n        const menuItemElements = document.querySelectorAll(\".menu-item\");\n        const menuToggler = document.querySelector(\".menu-toggler\");\n\n        // State Variables\n        let isMenuOpen = false;\n        \n        // Measurement Logic Setup\n        // We set initial GSAP properties for layout consistency\n        gsap.set(menuItems, { width: 0, paddingRight: 0 }); \n        gsap.set(menuItemElements, { opacity: 0, scale: 0.85 });\n\n        // Calculate measurements\n        const drawerGap = 0.35 * 16; // 0.35rem in pixels\n        const drawerPadding = 0.35 * 16;\n        const logoWidth = menuLogo.offsetWidth;\n        const togglerWidth = menuToggler.offsetWidth;\n        \n        // Temporarily get full width of items for calculation\n        // To get accurate width, we assume what it *would* be\n        // Manual calculation for pixel perfection based on styles:\n        // Item widths are content dependent. \n        \n        // We reset scaling to get natural width first\n        const menuItemsFullWidth = Array.from(menuItemElements).reduce((acc, el) => {\n            return acc + el.offsetWidth;\n        }, 0) + (drawerGap * (menuItemElements.length - 1));\n\n        const closedMenuWidth = drawerPadding + logoWidth + drawerGap + togglerWidth + drawerPadding;\n        \n        const openMenuWidth = \n            drawerPadding + \n            logoWidth + \n            drawerGap + \n            menuItemsFullWidth + \n            drawerGap + \n            togglerWidth + \n            drawerPadding;\n\n        // Apply initial visual state based on calculations\n        gsap.set(menuDropZone, { width: closedMenuWidth });\n        gsap.set(menuDrawer, { width: closedMenuWidth });\n\n        // Snap threshold distance\n        const snapThreshold = 200;\n\n        // --- TOGGLE FUNCTION ---\n        function toggleMenu() {\n            if (isMenuOpen) {\n                closeMenu();\n            } else {\n                openMenu();\n            }\n            // Update state\n            isMenuOpen = !isMenuOpen;\n        }\n\n        // Open Logic\n        function openMenu() {\n            menuToggler.classList.add(\"close\");\n\n            gsap.to(menuItems, {\n                width: menuItemsFullWidth,\n                marginRight: drawerGap,\n                duration: 0.5,\n                ease: \"power3.inOut\"\n            });\n\n            // Using fromTo for reliable staggering during rapid clicks\n            gsap.to(menuItemElements, {\n                opacity: 1,\n                scale: 1,\n                duration: 0.3,\n                stagger: 0.05,\n                delay: 0.2,\n                ease: \"power3.out\"\n            });\n\n            // Expand Parent Wrapper\n            gsap.to(menuDrawer, {\n                width: openMenuWidth,\n                duration: 0.5,\n                ease: \"power3.inOut\"\n            });\n        }\n\n        // Close Logic\n        function closeMenu() {\n            menuToggler.classList.remove(\"close\");\n\n            // Reverse animations\n            gsap.to(menuItems, {\n                width: 0,\n                marginRight: 0,\n                duration: 0.5,\n                ease: \"power3.inOut\"\n            });\n\n            gsap.to(menuItemElements, {\n                opacity: 0,\n                scale: 0.85,\n                duration: 0.3,\n                stagger: {\n                    each: 0.05,\n                    from: \"end\" // Reverse stagger direction\n                },\n                ease: \"power3.out\"\n            });\n\n            gsap.to(menuDrawer, {\n                width: closedMenuWidth,\n                duration: 0.5,\n                ease: \"power3.inOut\"\n            });\n        }\n\n        // Connect click event\n        menuToggler.addEventListener(\"click\", toggleMenu);\n\n        // --- DRAGGABLE SETUP ---\n        Draggable.create(menuDrawer, {\n            type: \"x,y\",\n            bounds: window, // Keep draggable within window\n            cursor: \"grab\",\n            activeCursor: \"grabbing\",\n            \n            // onDragStart: Measure the \"active\" state size to size the drop zone correctly\n            onDragStart: function() {\n                const activeMenuWidth = isMenuOpen ? openMenuWidth : closedMenuWidth;\n                gsap.set(menuDropZone, { width: activeMenuWidth });\n            },\n\n            // onDrag: Check distance from origin to show/hide drop zone\n            onDrag: function() {\n                // Calculate distance from 0,0 (original fixed position relative)\n                const isMenuWithinSnapZone = \n                    Math.abs(this.x) < snapThreshold && \n                    Math.abs(this.y) < snapThreshold;\n\n                if (isMenuWithinSnapZone) {\n                    gsap.to(menuDropZone, { opacity: 1, duration: 0.2 });\n                } else {\n                    gsap.to(menuDropZone, { opacity: 0, duration: 0.2 });\n                }\n            },\n\n            // onDragEnd: Snap logic\n            onDragEnd: function() {\n                // Hide zone immediately\n                gsap.to(menuDropZone, { opacity: 0, duration: 0.2 });\n\n                const isMenuWithinSnapZone = \n                    Math.abs(this.x) < snapThreshold && \n                    Math.abs(this.y) < snapThreshold;\n\n                if (isMenuWithinSnapZone) {\n                    // Snap back to origin\n                    gsap.to(menuDrawer, {\n                        x: 0,\n                        y: 0,\n                        duration: 0.5,\n                        ease: \"power3.out\" // Softer snap\n                    });\n                }\n                // Else: It stays where user dropped it\n            }\n        });\n\n    </script>\n</body>\n</html>"
  },
  {
    "title": "-",
    "description": "-",
    "code": "Documentation\n\n\nSetup: External Scripts\n\n\nCopy\n<script src=\"https://cdn.jsdelivr.net/npm/gsap@3.14.1/dist/gsap.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/gsap@3.14.1/dist/Draggable.min.js\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/gsap@3.14.1/dist/CustomEase.min.js\"></script>\nStep 1: Add HTML\n\n\nCopy\n<div data-dropping-stack-init=\"\" class=\"dropping-stack\">\n  <div data-dropping-stack-collection=\"\" class=\"dropping-stack__collection\">\n    <div class=\"dropping-stack__list\">\n      <div data-dropping-stack-item=\"\" class=\"dropping-stack__item\">\n        <div class=\"dropping-stack-card\">\n          <div class=\"dropping-stack-card__before\"></div>\n          <div class=\"dropping-stack-card__content\">\n            <div class=\"dropping-stack-card__start\">\n              <div class=\"dropping-stack-card__visual\">\n                <div class=\"dropping-stack-card__visual-before\"></div>\n                <img src=\"https://cdn.prod.website-files.com/6969f795b8c9b9bba545e75b/6969fb1c152133800af9cd81_service-1.avif\" loading=\"lazy\" alt=\"\" class=\"droping-stack-card__visual-img\">\n              </div>\n              <div class=\"dropping-stack-card__words\">\n                <p class=\"dropping-stack-card__p\">Brand Strategy</p>\n                <p class=\"dropping-stack-card__p\">Logo Design</p>\n                <p class=\"dropping-stack-card__p\">Visual Identity</p>\n              </div>\n            </div>\n            <div class=\"dropping-stack-card__end\">\n              <h3 class=\"dropping-stack-card__h\">Branding & Identity.</h3>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div data-dropping-stack-item=\"\" class=\"dropping-stack__item\">\n        <div class=\"dropping-stack-card is--light\">\n          <div class=\"dropping-stack-card__before\"></div>\n          <div class=\"dropping-stack-card__content\">\n            <div class=\"dropping-stack-card__start\">\n              <div class=\"dropping-stack-card__visual\">\n                <div class=\"dropping-stack-card__visual-before\"></div>\n                <img src=\"https://cdn.prod.website-files.com/6969f795b8c9b9bba545e75b/696a00119a186f6eae03811f_service-2.avif\" loading=\"lazy\" alt=\"\" class=\"droping-stack-card__visual-img\">\n              </div>\n              <div class=\"dropping-stack-card__words\">\n                <p class=\"dropping-stack-card__p\">Ads Creation</p>\n                <p class=\"dropping-stack-card__p\">SEO Setup</p>\n                <p class=\"dropping-stack-card__p\">Email Marketing</p>\n                <p class=\"dropping-stack-card__p\">Funnel Strategy</p>\n                <p class=\"dropping-stack-card__p\">Analytics</p>\n              </div>\n            </div>\n            <div class=\"dropping-stack-card__end\">\n              <h3 class=\"dropping-stack-card__h\">Marketing.</h3>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div data-dropping-stack-item=\"\" class=\"dropping-stack__item\">\n        <div class=\"dropping-stack-card is--purple\">\n          <div class=\"dropping-stack-card__before\"></div>\n          <div class=\"dropping-stack-card__content\">\n            <div class=\"dropping-stack-card__start\">\n              <div class=\"dropping-stack-card__visual\">\n                <div class=\"dropping-stack-card__visual-before\"></div>\n                <img src=\"https://cdn.prod.website-files.com/6969f795b8c9b9bba545e75b/696a000e473a6fb87e025764_service-3.avif\" loading=\"lazy\" alt=\"\" class=\"droping-stack-card__visual-img\">\n              </div>\n              <div class=\"dropping-stack-card__words\">\n                <p class=\"dropping-stack-card__p\">UX audits</p>\n                <p class=\"dropping-stack-card__p\">Wireframes & Prototypes</p>\n                <p class=\"dropping-stack-card__p\">User Testing</p>\n              </div>\n            </div>\n            <div class=\"dropping-stack-card__end\">\n              <h3 class=\"dropping-stack-card__h\">UX Strategy.</h3>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div data-dropping-stack-item=\"\" class=\"dropping-stack__item\">\n        <div class=\"dropping-stack-card is--pink\">\n          <div class=\"dropping-stack-card__before\"></div>\n          <div class=\"dropping-stack-card__content\">\n            <div class=\"dropping-stack-card__start\">\n              <div class=\"dropping-stack-card__visual\">\n                <div class=\"dropping-stack-card__visual-before\"></div>\n                <img src=\"https://cdn.prod.website-files.com/6969f795b8c9b9bba545e75b/696a0012a2bbbee1e9a7b23d_service-4.avif\" loading=\"lazy\" alt=\"\" class=\"droping-stack-card__visual-img\">\n              </div>\n              <div class=\"dropping-stack-card__words\">\n                <p class=\"dropping-stack-card__p\">Magic Spells</p>\n                <p class=\"dropping-stack-card__p\">Legendary Status</p>\n                <p class=\"dropping-stack-card__p\">Creative Powerhouse</p>\n                <p class=\"dropping-stack-card__p\">Early Adopter</p>\n              </div>\n            </div>\n            <div class=\"dropping-stack-card__end\">\n              <h3 class=\"dropping-stack-card__h\">Osmo Wizard.</h3>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div data-dropping-stack-item=\"\" class=\"dropping-stack__item\">\n        <div class=\"dropping-stack-card is--dark\">\n          <div class=\"dropping-stack-card__before\"></div>\n          <div class=\"dropping-stack-card__content\">\n            <div class=\"dropping-stack-card__start\">\n              <div class=\"dropping-stack-card__visual\">\n                <div class=\"dropping-stack-card__visual-before\"></div>\n                <img src=\"https://cdn.prod.website-files.com/6969f795b8c9b9bba545e75b/696a034ccd0b1a0c5b3af037_service-5.avif\" loading=\"lazy\"  alt=\"\" class=\"droping-stack-card__visual-img\">\n              </div>\n              <div class=\"dropping-stack-card__words\">\n                <p class=\"dropping-stack-card__p\">Web Design</p>\n                <p class=\"dropping-stack-card__p\">Webflow Development</p>\n                <p class=\"dropping-stack-card__p\">Osmo Supply</p>\n              </div>\n            </div>\n            <div class=\"dropping-stack-card__end\">\n              <h3 class=\"dropping-stack-card__h\">Websites.</h3>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"dropping-stack__controls\">\n    <div data-dropping-stack-prev=\"\" class=\"dropping-stack__control is--prev\">\n      <div class=\"dropping-stack__control-circle is--prev\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" viewbox=\"0 0 18 18\" fill=\"none\" class=\"dropping-stack__control-svg\"><path d=\"M6.74976 14.25L11.9998 9L6.74976 3.75\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n        </div>\n    </div>\n    <div data-dropping-stack-next=\"\" class=\"dropping-stack__control\">\n      <div class=\"dropping-stack__control-circle\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" viewbox=\"0 0 18 18\" fill=\"none\" class=\"dropping-stack__control-svg\"><path d=\"M6.74976 14.25L11.9998 9L6.74976 3.75\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path></svg>\n        </div>\n    </div>\n  </div>\n</div>\nStep 2: Add CSS\n\n\nCopy\n.dropping-stack {\n  grid-column-gap: 2em;\n  grid-row-gap: 2em;\n  flex-flow: column;\n  align-items: center;\n  display: flex;\n}\n\n.dropping-stack__collection {\n  padding-bottom: 7.5em;\n  padding-right: 7.5em;\n}\n\n.dropping-stack__list {\n  justify-content: center;\n  align-items: center;\n  display: flex;\n  position: relative;\n}\n\n.dropping-stack__item {\n  will-change: transform, opacity;\n  -webkit-user-select: none;\n  user-select: none;\n  position: absolute;\n}\n\n.dropping-stack__item:nth-child(1) {\n  position: relative;\n}\n\n.dropping-stack-card {\n  color: #201d1d;\n  background-color: #ffc664;\n  border-radius: 1.25em;\n  width: min(50em, 100vw - 10em);\n  position: relative;\n  overflow: hidden;\n}\n\n.dropping-stack-card.is--light {\n  background-color: #f4f4f4;\n}\n\n.dropping-stack-card.is--purple {\n  color: #f4f4f4;\n  background-color: #8963eb;\n}\n\n.dropping-stack-card.is--pink {\n  background-color: #e4bdf2;\n}\n\n.dropping-stack-card.is--dark {\n  color: #f4f4f4;\n  background-color: #10101f;\n}\n\n.dropping-stack-card__before {\n  padding-top: 62.5%;\n}\n\n.dropping-stack-card__content {\n  flex-flow: column;\n  justify-content: space-between;\n  width: 100%;\n  height: 100%;\n  padding: 3em;\n  display: flex;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.dropping-stack-card__start {\n  justify-content: space-between;\n  display: flex;\n}\n\n.dropping-stack-card__visual {\n  background-color: #0000001a;\n  border-radius: .5em;\n  width: 35%;\n  position: relative;\n}\n\n.dropping-stack-card__visual-before {\n  padding-top: 62.5%;\n}\n\n.droping-stack-card__visual-img {\n  object-fit: cover;\n  border-radius: inherit;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.dropping-stack-card__words {\n  width: 45%;\n}\n\n.dropping-stack-card__end {\n  display: flex;\n}\n\n.dropping-stack-card__h {\n  letter-spacing: -.03em;\n  margin-top: 0;\n  margin-bottom: 0;\n  font-size: 4.75em;\n  font-weight: 600;\n  line-height: .9;\n}\n\n.dropping-stack__controls {\n  grid-column-gap: .375em;\n  grid-row-gap: .375em;\n  display: flex;\n}\n\n.dropping-stack__control {\n  cursor: pointer;\n  border-radius: 50%;\n}\n\n.dropping-stack__control-circle {\n  color: #201d1d;\n  background-color: #f4f4f4;\n  border-radius: 50%;\n  flex: none;\n  justify-content: center;\n  align-items: center;\n  width: 3em;\n  height: 3em;\n  display: flex;\n  position: relative;\n  transition: transform 0.3s ease;\n  transform: translateY(0em) rotate(0.001deg);\n}\n\n.dropping-stack__control:hover .dropping-stack__control-circle {\n  transform: translateY(-0.25em) rotate(0.001deg);\n}\n\n.dropping-stack__control-circle.is--prev {\n  color: #f4f4f4;\n  background-color: #f4f4f433;\n}\n\n.dropping-stack__control-svg {\n  width: 40%;\n}\n\n.dropping-stack__control.is--prev {\n  transform: scaleX(-1);\n}\n\n@media screen and (max-width: 991px) {\n  .dropping-stack-card__before {\n    padding-top: 75%;\n  }\n}\n\n@media screen and (max-width: 767px) {\n  .dropping-stack__collection {\n    padding-bottom: 4.5em;\n    padding-right: 4.5em;\n  }\n\n  .dropping-stack-card {\n    width: min(50em, 100vw - 6.5em);\n  }\n\n  .dropping-stack-card__before {\n    padding-top: 150%;\n  }\n\n  .dropping-stack-card__content {\n    padding: 7.5vw;\n  }\n\n  .dropping-stack-card__start {\n    grid-column-gap: 2em;\n    grid-row-gap: 2em;\n    flex-flow: column;\n  }\n\n  .dropping-stack-card__h {\n    font-size: 10vw;\n  }\n\n  .dropping-stack-card__visual {\n    width: 60%;\n  }\n\n  .dropping-stack-card__words {\n    width: 100%;\n  }\n}\nStep 3: Add Javascript\n\n\nCopy\ngsap.registerPlugin(Draggable, CustomEase);\nCustomEase.create(\"osmo\", \"0.625, 0.05, 0, 1\");\n\nfunction initDroppingCardsStack() {\n  const stacks = document.querySelectorAll('[data-dropping-stack-init]');\n  if (!stacks.length) return;\n  \n  // Settings\n  const visibleCount = 4;\n  const minTotalForLoop = 5;\n  const duration = 0.75;\n  const mainEase = \"osmo\";\n  const dragThresholdPercent = 20;\n\n  const getUnitValue = (val, depth) => {\n    const num = parseFloat(val) || 0;\n    const unit = String(val).replace(/[0-9.-]/g, '') || 'px';\n    return (num * depth) + unit;\n  };\n\n  // Controls\n  stacks.forEach((stackEl) => {\n    const nextBtn = stackEl.querySelector('[data-dropping-stack-next]');\n    const prevBtn = stackEl.querySelector('[data-dropping-stack-prev]');\n\n    const list = stackEl.querySelector('.dropping-stack__list');\n    let cards = Array.from(list.querySelectorAll('[data-dropping-stack-item]'));\n    if (cards.length < 3) return;\n\n    const originalCount = cards.length;\n    if (cards.length < minTotalForLoop) {\n      const setsNeeded = Math.ceil(minTotalForLoop / originalCount);\n      const clonesToAdd = (setsNeeded * originalCount) - originalCount;\n\n      for (let i = 0; i < clonesToAdd; i++) {\n        const clone = cards[i % originalCount].cloneNode(true);\n        clone.setAttribute('aria-hidden', 'true');\n        list.appendChild(clone);\n      }\n\n      cards = Array.from(list.querySelectorAll('[data-dropping-stack-item]'));\n    }\n\n    const total = cards.length;\n    let activeIndex = 0;\n    let isAnimating = false;\n\n    let dragCard = null;\n    let draggableInstance = null;\n\n    let limitX = 1;\n    let limitY = 1;\n\n    let offsetX = \"0em\";\n    let offsetY = \"0em\";\n\n    let isActive = false;\n\n    const mod = (n, m) => ((n % m) + m) % m;\n    const cardAt = (offset) => cards[mod(activeIndex + offset, total)];\n\n    function updateOffsetsFromPadding() {\n      const collectionEl = stackEl.querySelector('[data-dropping-stack-collection]');\n      if (!collectionEl) return;\n\n      const styles = getComputedStyle(collectionEl);\n\n      const padRight = parseFloat(styles.paddingRight) || 0;\n      const padLeft = parseFloat(styles.paddingLeft) || 0;\n\n      const padBottom = parseFloat(styles.paddingBottom) || 0;\n      const padTop = parseFloat(styles.paddingTop) || 0;\n\n      const steps = Math.max(1, visibleCount - 1);\n\n      const usePadX = Math.max(padRight, padLeft);\n      const usePadY = Math.max(padBottom, padTop);\n\n      const signX = padLeft > padRight ? -1 : 1;\n      const signY = padTop > padBottom ? -1 : 1;\n\n      const xStep = (usePadX / steps) * signX;\n      const yStep = (usePadY / steps) * signY;\n\n      offsetX = xStep + \"px\";\n      offsetY = yStep + \"px\";\n    }\n\n    function updateDragLimits() {\n      if (!dragCard) return;\n      const cardRect = dragCard.getBoundingClientRect();\n      limitX = cardRect.width || 1;\n      limitY = cardRect.height || 1;\n    }\n\n    // Sets cards to their static stack positions\n    function applyState() {\n      updateOffsetsFromPadding();\n\n      cards.forEach((card) => {\n        gsap.set(card, { \n          opacity: 0, \n          pointerEvents: 'none', \n          zIndex: 0, \n          x: 0, \n          y: 0, \n          xPercent: 0, \n          yPercent: 0 \n        });\n      });\n\n      for (let depth = 0; depth < visibleCount; depth++) {\n        const card = cardAt(depth);\n        const xVal = getUnitValue(offsetX, depth);\n        const yVal = getUnitValue(offsetY, depth);\n\n        const state = {\n          opacity: 1,\n          zIndex: 999 - depth,\n          pointerEvents: depth === 0 ? 'auto' : 'none'\n        };\n\n        if (offsetX.includes('%')) state.xPercent = parseFloat(xVal); else state.x = xVal;\n        if (offsetY.includes('%')) state.yPercent = parseFloat(yVal); else state.y = yVal;\n\n        gsap.set(card, state);\n      }\n\n      dragCard = cardAt(0);\n      gsap.set(dragCard, { touchAction: 'none' });\n\n      updateDragLimits();\n\n      if (draggableInstance) {\n        draggableInstance.kill();\n        draggableInstance = null;\n      }\n\n      const magnetize = (raw, limit) => {\n        const sign = Math.sign(raw) || 1;\n        const abs = Math.abs(raw);\n        const out = limit * Math.tanh(abs / limit);\n        return sign * out;\n      };\n\n      draggableInstance = Draggable.create(dragCard, {\n        type: 'x,y',\n        inertia: false,\n        onPress: function () {\n          if (isAnimating) return;\n          gsap.killTweensOf(dragCard);\n          gsap.set(dragCard, { zIndex: 2000, opacity: 1 });\n        },\n        onDrag: function () {\n          if (isAnimating) return;\n\n          const x = magnetize(this.x, limitX);\n          const y = magnetize(this.y, limitY);\n\n          gsap.set(dragCard, { x, y, opacity: 1 });\n        },\n        onRelease: function () {\n          if (isAnimating) return;\n\n          const currentX = gsap.getProperty(dragCard, 'x');\n          const currentY = gsap.getProperty(dragCard, 'y');\n\n          const movedXPercent = Math.abs(currentX) / limitX * 100;\n          const movedYPercent = Math.abs(currentY) / limitY * 100;\n          const movedPercent = Math.max(movedXPercent, movedYPercent);\n\n          if (movedPercent >= dragThresholdPercent) {\n            animateNext(true, currentX, currentY);\n            return;\n          }\n          \n          // Move back to stack if treshold is not reached\n          gsap.to(dragCard, {\n            x: 0,\n            y: 0,\n            opacity: 1,\n            duration: 1,\n            ease: 'elastic.out(1, 0.7)',\n            onComplete: () => {\n              applyState();\n            }\n          });\n        }\n      })[0];\n    }\n\n    function animateNext(fromDrag = false, releaseX = 0, releaseY = 0) {\n      if (isAnimating) return;\n      isAnimating = true;\n\n      const outgoing = cardAt(0);\n      const incomingBack = cardAt(visibleCount);\n      const tl = gsap.timeline({\n        defaults: { duration, ease: mainEase },\n        onComplete: () => {\n          activeIndex = mod(activeIndex + 1, total);\n          applyState();\n          isAnimating = false;\n        }\n      });\n\n      gsap.set(outgoing, { zIndex: 2000, opacity: 1 });\n      if (fromDrag) gsap.set(outgoing, { x: releaseX, y: releaseY });\n\n      // Next: Move top card down and fade it out late\n      tl.to(outgoing, { yPercent: 200 }, 0);\n      tl.to(outgoing, { opacity: 0, duration: duration * 0.2, ease: 'none' }, duration * 0.4);\n\n      // Next: Shift existing stack cards forward\n      for (let depth = 1; depth < visibleCount; depth++) {\n        const xVal = getUnitValue(offsetX, depth - 1);\n        const yVal = getUnitValue(offsetY, depth - 1);\n        const move = { zIndex: 999 - (depth - 1) };\n        \n        if (offsetX.includes('%')) move.xPercent = parseFloat(xVal); else move.x = xVal;\n        if (offsetY.includes('%')) move.yPercent = parseFloat(yVal); else move.y = yVal;\n        \n        tl.to(cardAt(depth), move, 0);\n      }\n\n      // Next: Bring new card in from the \"invisible\" position\n      const backX = getUnitValue(offsetX, visibleCount);\n      const backY = getUnitValue(offsetY, visibleCount);\n      const startX = getUnitValue(offsetX, visibleCount - 1);\n      const startY = getUnitValue(offsetY, visibleCount - 1);\n\n      const incomingSet = { opacity: 0, zIndex: 999 - visibleCount };\n      if (offsetX.includes('%')) incomingSet.xPercent = parseFloat(backX); else incomingSet.x = backX;\n      if (offsetY.includes('%')) incomingSet.yPercent = parseFloat(backY); else incomingSet.y = backY;\n      gsap.set(incomingBack, incomingSet);\n\n      const incomingTo = { opacity: 1 };\n      if (offsetX.includes('%')) incomingTo.xPercent = parseFloat(startX); else incomingTo.x = startX;\n      if (offsetY.includes('%')) incomingTo.yPercent = parseFloat(startY); else incomingTo.y = startY;\n      tl.to(incomingBack, incomingTo, 0);\n    }\n\n    function animatePrev() {\n      if (isAnimating) return;\n      isAnimating = true;\n\n      const incomingTop = cardAt(-1);\n      const leavingBack = cardAt(visibleCount - 1);\n      const tl = gsap.timeline({\n        defaults: { duration, ease: mainEase },\n        onComplete: () => {\n          activeIndex = mod(activeIndex - 1, total);\n          applyState();\n          isAnimating = false;\n        }\n      });\n\n      gsap.set(leavingBack, { zIndex: 1 });\n\n      // Prev: Move a card from top-offset to active position\n      gsap.set(incomingTop, { opacity: 0, x: 0, xPercent: 0, yPercent: -200, zIndex: 2000 });\n      tl.to(incomingTop, { yPercent: 0 }, 0);\n      tl.to(incomingTop, { opacity: 1, duration: duration * 0.2, ease: 'none' }, duration * 0.3);\n\n      // Prev: Push current stack cards back one level\n      for (let depth = 0; depth < visibleCount - 1; depth++) {\n        const xVal = getUnitValue(offsetX, depth + 1);\n        const yVal = getUnitValue(offsetY, depth + 1);\n        const move = { zIndex: 999 - (depth + 1) };\n\n        if (offsetX.includes('%')) move.xPercent = parseFloat(xVal); else move.x = xVal;\n        if (offsetY.includes('%')) move.yPercent = parseFloat(yVal); else move.y = yVal;\n\n        tl.to(cardAt(depth), move, 0);\n      }\n\n      // Prev: Slide the back-most card into the \"invisible\" position\n      const backX = getUnitValue(offsetX, visibleCount);\n      const backY = getUnitValue(offsetY, visibleCount);\n      const hideBack = { opacity: 0 };\n      if (offsetX.includes('%')) hideBack.xPercent = parseFloat(backX); else hideBack.x = backX;\n      if (offsetY.includes('%')) hideBack.yPercent = parseFloat(backY); else hideBack.y = backY;\n      tl.to(leavingBack, hideBack, 0);\n    }\n\t\t\n    // Keyboard Arrow controls next/prev\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        isActive = entry.isIntersecting && entry.intersectionRatio >= 0.6;\n      });\n    }, { threshold: [0, 0.6, 1] });\n\n    observer.observe(stackEl);\n\n    const onKeyDown = (e) => {\n      if (!isActive) return;\n      if (isAnimating) return;\n\n      const tag = (e.target && e.target.tagName) ? e.target.tagName.toLowerCase() : '';\n      const isTyping = tag === 'input' || tag === 'textarea' || tag === 'select' || (e.target && e.target.isContentEditable);\n      if (isTyping) return;\n\n      if (e.key === 'ArrowRight') {\n        e.preventDefault();\n        animateNext(false);\n      }\n\n      if (e.key === 'ArrowLeft') {\n        e.preventDefault();\n        animatePrev();\n      }\n    };\n\n    window.addEventListener('keydown', onKeyDown);\n\n    applyState();\n\n    if (nextBtn) nextBtn.addEventListener('click', () => animateNext(false));\n    if (prevBtn) prevBtn.addEventListener('click', animatePrev);\n\n    window.addEventListener('resize', () => {\n      applyState();\n    });\n  });\n}\n\n// Initialize Dropping Cards Stack\ndocument.addEventListener('DOMContentLoaded', function() {\n  initDroppingCardsStack();\n});\nImplementation\nStack\nUse [data-dropping-stack-init] to define the root element that initializes one dropping cards stack instance.\n\n<div data-dropping-stack-init class=\"dropping-stack\">\n  <div data-dropping-stack-collection class=\"dropping-stack__collection\">\n    <div class=\"dropping-stack__list\">\n      <div data-dropping-stack-item class=\"dropping-stack__item\"></div>\n      <div data-dropping-stack-item class=\"dropping-stack__item\"></div>\n      <div data-dropping-stack-item class=\"dropping-stack__item\"></div>\n    </div>\n  </div>\n  <!-- Controls -->\n  <button type=\"button\" data-dropping-stack-prev>Prev</button>\n  <button type=\"button\" data-dropping-stack-next>Next</button>\n</div>\nCards Offset\nThe script uses[data-dropping-stack-collection] element to read and calculate the padding around the stack, and uses it to build the stacked layout and control the spacing between each visible card.\n\nFor example, if you set padding-right: 6em; and padding-bottom: 6em; and show 4 cards, the script divides 6em by 3 and applies a 2em offset per card.\n\nCard\nUse [data-dropping-stack-item] on each card element to include it in the stack.\n\nNext & Prev\nUse [data-dropping-stack-next] to trigger a forward rotation where the top card drops out and the next card enters the visible stack.\n\nUse [data-dropping-stack-prev] to trigger a backward rotation where the previous card returns to the top and the stack shifts back one step.\n\nCustomizing\nEdit the settings inside the script to control how many cards are visible, how the infinite loop behaves, how fast it animates, which easing curve it uses, and how far a card must be dragged before it triggers the next animation.\n\n// Settings\nconst visibleCount = 4;\nconst minTotalForLoop = 5;\nconst duration = 0.75;\nconst mainEase = \"osmo\";\nconst dragThresholdPercent = 20;"
  }
]